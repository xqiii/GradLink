# 中国地区同学毕业去向应用开发计划

## MongoDB安装与配置指南

由于系统兼容性原因，我们推荐使用以下方式之一安装MongoDB：

### 方式1：Docker运行MongoDB（推荐）
```bash
# 拉取并运行MongoDB容器
docker run -d --name mongodb -p 27017:27017 -e MONGO_INITDB_ROOT_USERNAME=admin -e MONGO_INITDB_ROOT_PASSWORD=password mongo:latest
```

### 方式2：本地安装MongoDB
```bash
# 添加MongoDB官方tap
brew tap mongodb/brew

# 安装MongoDB社区版
brew install mongodb-community

# 启动MongoDB服务
brew services start mongodb-community
```

### 数据库配置
项目已在.env文件中配置了数据库连接信息：
- 用户名：admin
- 密码：password
- 数据库名：link-map-dev

### 数据库连接故障处理
如果遇到数据库连接问题，请检查：
1. MongoDB服务是否正在运行
2. 连接字符串中的用户名和密码是否正确
3. 防火墙是否允许访问27017端口

## 开发进度

### ✅ 第一阶段：项目初始化（已完成）
- ✅ 创建项目目录结构
- ✅ 初始化前端项目（React + Vite）
- ✅ 初始化后端项目（Node.js + Express）
- ✅ 配置基础依赖
- ✅ 设置数据库连接配置

### ✅ 第二阶段：后端开发（已完成）
- ✅ 设计并实现数据库模型（User, Person）
- ✅ 开发用户认证功能（登录、注册）
- ✅ 开发数据CRUD API
- ✅ 实现JWT认证中间件
- ✅ 实现按省份统计功能

### ✅ 第三阶段：前端开发 - 管理页面（已完成）
- ✅ 设计管理页面布局
- ✅ 实现登录功能
- ✅ 开发数据列表组件
- ✅ 实现数据增删改查表单
- ✅ 添加数据验证和错误处理

### ✅ 第四阶段：前端开发 - 地图展示页面（已完成）
- ✅ 集成ECharts地图组件
- ✅ 实现中国地图渲染框架
- ✅ 开发数据点标记功能
- ✅ 实现地图交互和弹窗功能

### 📝 第五阶段：集成与测试（待完成）
- ⬜ 前后端集成
- ⬜ 全流程测试
- ⬜ 性能优化
- ⬜ 安全性检查

### 📝 第六阶段：部署与文档（待完成）
- ⬜ 编写部署文档
- ⬜ 准备生产环境部署
- ⬜ 完成项目文档

## 项目概述
开发一个基于中国地图的数据可视化应用，包含管理员后台和地图展示页面。管理员可对地址（省市）、姓名、微信等数据进行管理，地图展示页面可直观展示这些数据点，并支持交互功能。

## 技术栈

### 前端
- **框架**：React.js
- **UI组件库**：Ant Design
- **地图可视化**：ECharts（支持中国地图数据可视化）
- **状态管理**：Redux Toolkit
- **路由**：React Router
- **HTTP请求**：Axios
- **构建工具**：Vite

### 后端
- **运行环境**：Node.js
- **Web框架**：Express.js
- **数据库**：MongoDB
- **ORM**：Mongoose
- **认证**：JWT (JSON Web Token)
- **API文档**：Swagger

## 系统架构

### 前端架构
- **单页应用(SPA)**：采用前后端分离架构
- **组件化设计**：将UI拆分为可复用组件
- **状态管理**：全局状态管理与组件状态管理相结合
- **路由设计**：区分管理页和展示页路由

### 后端架构
- **RESTful API设计**：规范的API接口
- **MVC模式**：Model-View-Controller架构
- **中间件**：处理认证、错误等
- **数据库设计**：合理的数据模型设计

## 功能模块

### 1. 数据管理模块（管理员页面）
- **用户认证**：登录、登出功能
- **数据列表**：展示所有人员数据，支持分页、搜索、排序
- **添加数据**：新增人员信息（地址、姓名、微信）
- **编辑数据**：修改已有人员信息
- **删除数据**：支持单个删除和批量删除
- **数据验证**：表单验证确保数据完整性

### 2. 地图展示模块（展示页面）
- **中国地图渲染**：使用ECharts渲染中国地图
- **数据标记**：在地图上标记所有人员数据点
- **地图交互**：支持缩放、平移、旋转等操作
- **省点击事件**：点击省份显示该省所有人员信息
- **人员信息弹窗**：点击标记点显示详细信息

### 3. 后端API模块
- **用户认证API**：管理员登录验证
- **数据CRUD API**：支持人员数据的增删改查
- **数据统计API**：按省份统计人员数量
- **数据导出API**：支持数据导出功能

## 数据库设计

### 1. 用户表（users）
```javascript
{
  _id: ObjectId,
  username: String,  // 管理员用户名
  password: String,  // 密码（加密存储）
  createdAt: Date,
  updatedAt: Date
}
```

### 2. 人员数据表（persons）
```javascript
{
  _id: ObjectId,
  name: String,      // 姓名
  province: String,  // 省份
  city: String,      // 城市
  wechat: String,    // 微信号
  location: {        // 地理坐标（可选）
    type: "Point",
    coordinates: [longitude, latitude]
  },
  createdAt: Date,
  updatedAt: Date
}
```

## 开发流程

### 第一阶段：项目初始化（3天）
1. 创建项目目录结构
2. 初始化前端项目（React + Vite）
3. 初始化后端项目（Node.js + Express）
4. 配置基础依赖
5. 设置数据库连接

### 第二阶段：后端开发（5天）
1. 设计并实现数据库模型
2. 开发用户认证功能
3. 开发数据CRUD API
4. 编写API文档
5. 单元测试

### 第三阶段：前端开发 - 管理页面（4天）
1. 设计管理页面布局
2. 实现登录功能
3. 开发数据列表组件
4. 实现数据增删改查表单
5. 添加数据验证和错误处理

### 第四阶段：前端开发 - 地图展示页面（4天）
1. 集成ECharts地图组件
2. 实现中国地图渲染
3. 开发数据点标记功能
4. 实现地图交互和弹窗功能
5. 优化地图性能

### 第五阶段：集成与测试（3天）
1. 前后端集成
2. 全流程测试
3. 性能优化
4. 安全性检查

### 第六阶段：部署与文档（2天）
1. 编写部署文档
2. 准备生产环境部署
3. 完成项目文档

## 部署方案

### 开发环境
- 前端：Vite开发服务器（localhost:3030）
- 后端：Node.js开发服务器（localhost:5050）
- 数据库：本地MongoDB

### 生产环境
- 前端：Nginx + CDN
- 后端：Node.js + PM2
- 数据库：MongoDB Atlas或自建MongoDB集群
- 容器化：可选Docker部署

## 开发注意事项

1. **安全性**
   - 密码加密存储
   - API接口权限控制
   - 输入数据验证和过滤
   - 防止SQL注入和XSS攻击

2. **性能优化**
   - 前端资源压缩和缓存
   - API响应时间优化
   - 数据库索引优化
   - 大数据量下的渲染优化

3. **用户体验**
   - 响应式设计，适配不同设备
   - 加载状态和错误提示
   - 地图交互流畅性
   - 表单操作友好性

4. **可维护性**
   - 代码规范统一
   - 完善的注释文档
   - 模块化设计
   - 版本控制规范